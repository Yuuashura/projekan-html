<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daftar Akun Baru</title>
    <link rel="stylesheet" href="../css/header-footer.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --dark-navy: #0a192f;
            --navy: #112240;
            --light-navy: #233554;
            --lightest-navy: #303c55;
            --slate: #8892b0;
            --light-slate: #a8b2d1;
            --white: #e6f1ff;
            --accent: #64ffda;
            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }

        body{
            background-image: url("../assets/raiden.png");
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        body::after{
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(10, 25, 47, 0.85);
            z-index: -1;
        }

        .form-container {
            background-color: var(--navy);
            padding: 2.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);
            width: 100%;
            max-width: 500px;
            margin: 30px auto;
            border: 1px solid var(--lightest-navy);
        }

        h1 {
            color: var(--white);
            text-align: center;
            margin-bottom: 2rem;
            font-size: 1.8rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--light-slate);
        }

        .input-field {
            width: 100%;
            padding: 0.75rem;
            background-color: var(--light-navy);
            border: 1px solid var(--lightest-navy);
            border-radius: 5px;
            color: var(--white);
            font-size: 1rem;
            box-sizing: border-box;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(100, 255, 218, 0.3);
        }

        .submit-button {
            width: 100%;
            padding: 0.85rem;
            background-color: var(--accent);
            color: var(--dark-navy);
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.3s ease, opacity 0.3s ease;
        }
        
        .submit-button:disabled {
            background-color: var(--lightest-navy);
            color: var(--slate);
            cursor: not-allowed;
            opacity: 0.7;
        }

        .submit-button:hover:not(:disabled) {
            opacity: 0.8;
        }

        .form-link {
            text-align: center;
            margin-top: 1.5rem;
            font-size: 0.9rem;
        }

        .form-link a {
            color: var(--accent);
            text-decoration: none;
            font-weight: 500;
        }

        .form-link a:hover {
            text-decoration: underline;
        }
        
        /* --- CSS BARU UNTUK POP-UP NOTIFIKASI --- */
        .popup-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            font-weight: 500;
            z-index: 9999;
            animation: slideIn 0.3s ease-out forwards;
        }
        
        .popup-notification.success {
            background-color: #27ae60; /* Hijau untuk sukses */
            color: var(--white);
        }

        .popup-notification.error {
            background-color: #c0392b; /* Merah untuk error */
            color: var(--white);
        }
        
        /* Animasi untuk pop-up */
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @media (max-width: 480px) {
            .form-container {
                padding: 2rem;
                margin: 20px auto;
            }
            h1 {
                font-size: 1.6rem;
            }
            .popup-notification {
                top: 10px;
                right: 10px;
                left: 10px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
<header>
      <a href="../"><i><h1 class="judul">Mona<span>Komik</span></h1></i></a>
      <div class="nav">
        <a href="../"><p>Home</p></a>
        <a href="pustaka.html"><p>Genre</p></a>
        <a href="all-komik.html"><p>All Comic</p></a>
        <a href="login.html"><p>Masuk</p></a>
        <a href="register.html" class="home"><p>Daftar</p></a>
        <a href="tentang.html"><p>Tentang</p></a>
      </div>
      <button class="mobile-menu-toggle" id="mobileMenuToggle">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <form class="cari" id="searchForm">
        <input type="text" placeholder="search" id="searchInput"/>
        <button type="submit"><img src="../assets/search.png" alt="Search"/></button>
      </form>
    </header>


        <div class="mobile-nav-overlay" id="mobileNavOverlay">
      <button class="mobile-nav-close" id="mobileNavClose">&times;</button>
      <div class="nav">
        <a href="../"><p>Home</p></a>
        <a href="pustaka.html"><p>Genre List</p></a>
        <a href="all-komik.html"><p>All Comic</p></a>
        <a href="login.html"><p>Masuk</p></a>
        <a href="register.html" class="home"><p>Daftar</p></a>
        <a href="tentang.html"><p>Tentang</p></a>
      </div>
    </div>





    <div class="form-container">
        <form id="register-form">
            <h1>Buat Akun Baru ✍️</h1>
            
            <div class="form-group">
                <label for="username">Nama Pengguna</label>
                <input type="text" id="username" name="username" class="input-field" required>
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" class="input-field" required>
            </div>
            <div class="form-group">
                <label for="password">Kata Sandi</label>
                <input type="password" id="password" name="password" class="input-field" required minlength="6">
            </div>
            <button type="submit" class="submit-button">Register</button>
            <p class="form-link">
                Sudah punya akun? <a href="login.html">Masuk di sini</a>
            </p>
        </form>
    </div>
    
        <footer>
        <div class="medsos">
            <a href="https://instagram.com/yudis.ashura" target="_blank"><span><img src="../icon/instagram.png" alt="Instagram" /></span></a>
        </div>
        <div class="medsos">
            <a href="https://github.com/yuuashura" target="_blank"><span><img src="../icon/github.png" alt="GitHub" /></span></a>
        </div>
        <div class="medsos">
            <a href="https://facebook.com/4sa.cyber" target="_blank"><span><img src="../icon/facebook.png" alt="Facebook" /></span></a>
        </div>
        <div class="medsos">
            <a href="https://telegram.com/#" target="_blank"><span><img src="../icon/telegram.png" alt="Telegram" /></span></a>
        </div>
        <div class="text-footer">
            <p>
              All the comics on this website are only previews of the original
              comics,there may be many language errors, character names, and story
              lines. For the original version, please buy the comic if it's
              available in your city.
            </p>
            <br />
            <hr />
            <p>&copy; MoonKomik</p>
        </div>
    </footer>
</body>


<script>
    const api = 'https://yuu-api-regist.vercel.app/api/register';
    
    const registerForm = document.getElementById('register-form');
    const usernameInput = document.getElementById('username');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const submitButton = document.querySelector('.submit-button');

    if (localStorage.getItem('isLogin') === 'true') {
        popUpNotification('Kamu sudah login', 'error');
        registerForm.querySelectorAll('input, button').forEach(el => el.disabled = true);
    } else {
        registerForm.addEventListener('submit', async function (event) {
            event.preventDefault();
            submitButton.disabled = true;
            submitButton.textContent = 'Mendaftar...';
            const userData = {
                username: usernameInput.value,
                email: emailInput.value,
                password: passwordInput.value
            };

            try {
                const response = await fetch(api, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(userData)
                });

                const data = await response.json();
                if (!response.ok) {
                    throw new Error(data.message || 'Terjadi kesalahan pada API');
                }
                popUpNotification('Akun berhasil dibuat! Mengarahkan ke halaman login...', 'success');
                setTimeout(() => {
                    window.location.href = 'login.html';
                }, 2000);

            } catch (error) {
                console.error('Error:', error);
                popUpNotification(error.message, 'error');
                submitButton.disabled = false;
                submitButton.textContent = 'Register';
            }
        });
    }

    function popUpNotification(message, type) {
        const notification = document.createElement('div');
        notification.className = `popup-notification ${type}`;
        notification.textContent = message;
        document.body.appendChild(notification);

        setTimeout(() => {
            notification.remove();
        }, 3000);
    }
</script>

</html>